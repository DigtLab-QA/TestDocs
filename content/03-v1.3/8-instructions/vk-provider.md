---
slug: "/post5"
title: "Настройка авторизации через VK"
sort: "05"
---

## Настройка провайдера для авторизации через VK

1. Зарегистрируйтесь и/или авторизуйтесь на сервисе, где развернута система Trusted.Net (далее рассматривается сервис [Trusted.ID](https://id.trusted.plus)).  
2. Создайте провайдер типа OAuth2.0.  
3. Зарегистрируйтесь/авторизуйтесь в [ВКонтакте](https://vk.com/).  
4. Перейдите на страницу добавления приложения https://vk.com/editapp?act=create.    
   ![vk-apps1](./images/vk-apps1.jpg "Создать приложение")  
5. Напишите любое название, например, домен вашего сайта.  
6. Выберите платформу **Cайт**.  
7. Напишите адрес своего сайта и отдельно только его домен — без указания протокола.   
8. Нажмите **Подключить сайт**.  
   
9.  Перейдите в раздел **Настройки** на форме редактирования приложения.
    
    ![vk-apps2](./images/vk-apps2.jpg "Настройки приложения")  

10. Скопируйте значения **ID приложения** и **Защищенный ключ**.
 
11. Перейдите в настройки провайдера OAuth2.0 на сервисе.  
    
    ![vk-apps6](./images/vk-apps6.jpg "Настройки провайдера")  

12. Вставьте скопированные значения в соответствующие поля в настройках провайдера  и нажмите **Сохранить**.  
    
    ![vk-apps3](./images/vk-apps3.jpg "Настройки авторизации провайдера")  

13. В настройках провайдера установите:  
    - user_authorization_uri - https://oauth.vk.com/authorize  
    - scope - offline,email  
    - access_token_uri - https://oauth.vk.com/access_token  
    - user_info_uri - https://api.vk.com/method/getProfiles?v=5.92     
  
    ![vk-fields](./images/vk-fields.jpg "Настройки авторизации провайдера")
 
	**Сохраните** изменения.  

20. В настройках провайдера установите флаг **Настройки приватности** как **Публичный**, если хотите, чтобы данный провайдер был доступен всем при настройке авторизации в приложение.  
    
     ![external-provider](./images/external-provider.jpg "Настройки приватности")   


##  Добавление созданного VK провайдера в приложение
   
1.  Выберите раздел **Мои приложения** в личном кабинете.
   
      ![my-app-menu.png](./images/my-app-menu.png "Мои приложения")

2. В списке приложений выберите приложение, в которое будет добавлена авторизация через VK провайдер.
   
      ![view-new-app.png](./images/view-new-app.png "Список приложений")

3. В открывшемся окне настроек приложения в разделе **Список провайдеров** нажмите кнопку добавления нового провайдера.
    ![add-provider-btn-to-app](./images/add-provider-btn-to-app.png "Кнопка добавления провайдера") 
   
      ![add-provider-btn](./images/list-providers.png "Список подключенных провайдеров") 

4. Установите флаг напротив созданного провайдера в списке доступных провайдеров и нажмите кнопку **Сохранить**.
   
      ![select-vk](./images/select-vk.jpg "Список провайдеров") 

5. Список провайдеров приложения обновится, и в нем отразится добавленный провайдер.

      ![add-ptovider-vk](./images/add-ptovider-vk.jpg "Список провайдеров")

6. В разделе **Способы авторизации** убедитесь, что переключатель **Провайдеры внешних аккаунтов** включен.

      ![flag-on.png](./images/flag-on.png "Включения флага авторизации через провайдеров внешних аккаунтов")

7. Теперь авторизация в приложение доступна через провайдер VK.
     
      ![app-login-vk.png](./images/app-login-vk.png "Форма авторизации в приложение")

**ИНСТРУКЦИИ ПО ТЕМЕ:**  

1. [Инструкция по созданию приложения.](https://docs.trusted.plus/03-v1.3/8-instructions/create-app)  
2. [Как создать провайдер.](https://docs.trusted.plus/03-v1.3/5-providers/providers)  